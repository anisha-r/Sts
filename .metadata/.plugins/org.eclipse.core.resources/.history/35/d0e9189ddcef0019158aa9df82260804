package com.javainterviewpoint;

import java.util.HashSet;
import java.util.Set;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.stereotype.Component;

@Component
public class SaveLogic 
{
    private static SaveLogic saveLogic;
    
    @Autowired
    private EmployeeRepository employeeRepository;
    
    public static void main( String[] args )
    {
        //Reading the Configuration file
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("springConfig.xml");
        
        //Get the SaveLogic bean
        saveLogic = (SaveLogic)context.getBean("saveLogic");
        
        saveLogic.saveEmployee();
        
        context.close();
    }
    
    public void saveEmployee()
    {
        Employee employee = new Employee();
        employee.setEmpName("JIP");
        
        Employee_Address employeeAddress1 = new Employee_Address();
        employeeAddress1.setStreet("Street 1");
        employeeAddress1.setCity("City 1");
        employeeAddress1.setCountry("Country 1");
        employeeAddress1.setState("State 1");
        employeeAddress1.setEmployee(employee);
        
        
        Employee_Address employeeAddress2 = new Employee_Address();
        employeeAddress2.setStreet("Street 2");
        employeeAddress2.setCity("City 2");
        employeeAddress2.setCountry("Country 2");
        employeeAddress2.setState("State 2");
        employeeAddress2.setEmployee(employee);
        
        Employee_Address employeeAddress3 = new Employee_Address();
        employeeAddress3.setStreet("Street 2");
        employeeAddress3.setCity("City 2");
        employeeAddress3.setCountry("Country 3");
        employeeAddress3.setState("State 3");
        employeeAddress3.setEmployee(employee);
        
        Employee_Address employeeAddress4 = new Employee_Address();
        employeeAddress4.setStreet("Street 2");
        employeeAddress4.setCity("City 2");
        employeeAddress4.setCountry("Country 3");
        employeeAddress4.setState("State 4");
        employeeAddress4.setEmployee(employee);
        
        
        
        Set<Employee_Address> employeeAddressSet = new HashSet<Employee_Address>();
        employeeAddressSet.add(employeeAddress1);
        employeeAddressSet.add(employeeAddress2);
        employeeAddressSet.add(employeeAddress3);
        employeeAddressSet.add(employeeAddress4);
        
        employee.setEmployeeAddress(employeeAddressSet);
        
        employee.setEmpName("Anisha");
        Employee_Address employeeAddress5 = new Employee_Address();
        employeeAddress5.setStreet("Street 1");
        employeeAddress5.setCity("City 1");
        employeeAddress5.setCountry("Country 1");
        employeeAddress5.setState("State 1");
        employeeAddress5.setEmployee(employee);
        
        
        Employee_Address employeeAddress6 = new Employee_Address();
        employeeAddress6.setStreet("Street 2");
        employeeAddress6.setCity("City 2");
        employeeAddress6.setCountry("Country 2");
        employeeAddress6.setState("State 2");
        employeeAddress6.setEmployee(employee);
        
        Employee_Address employeeAddress7 = new Employee_Address();
        employeeAddress7.setStreet("Street 2");
        employeeAddress7.setCity("City 2");
        employeeAddress7.setCountry("Country 3");
        employeeAddress7.setState("State 3");
        employeeAddress7.setEmployee(employee);
        
        Employee_Address employeeAddress8 = new Employee_Address();
        employeeAddress8.setStreet("Street 2");
        employeeAddress8.setCity("City 2");
        employeeAddress8.setCountry("Country 3");
        employeeAddress8.setState("State 4");
        employeeAddress8.setEmployee(employee);
        
        Set<Employee_Address> employeeAddressSets = new HashSet<Employee_Address>();
        employeeAddressSets.add(employeeAddress5);
        employeeAddressSets.add(employeeAddress6);
        employeeAddressSets.add(employeeAddress7);
        employeeAddressSets.add(employeeAddress8);
        
        employee.setEmployeeAddress(employeeAddressSets);
        
        employeeRepository.save(employee);
        System.out.println("Employee and Employee Address saved successfully!!");
    }
}
